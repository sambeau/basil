# BUG-013: ORDER BY with comma-separated fields fails to parse

**Status:** Fixed  
**Priority:** High  
**Reported:** 2026-01-05  
**Fixed:** 2026-01-05  
**Component:** Query DSL Parser

## Symptom

Using comma-separated fields in ORDER BY clause causes a parser error:

```parsley
@query(
    People 
    | order Year, Month, Day desc
    ??->*
)
```

Error:
```
expected ')', got ','
at birthdays/birthdays.pars:9:15
```

## Expected Behavior

Should support standard SQL-style ORDER BY with multiple fields:
```parsley
| order Year, Month, Day desc
| order Year asc, Month desc, Day asc
```

## Root Cause

The `parseQueryModifier` function in parser.go only parses a single field for ORDER BY:

```go
case "order":
    mod.Kind = "order"
    mod.Fields = []string{}
    // Parse field list
    if !p.expectPeek(lexer.IDENT) {
        return nil
    }
    mod.Fields = append(mod.Fields, p.curToken.Literal)
    // Check for asc/desc - only one direction for all fields!
    if p.peekTokenIs(lexer.IDENT) && (p.peekToken.Literal == "asc" || p.peekToken.Literal == "desc") {
        p.nextToken()
        mod.Direction = p.curToken.Literal
    }
```

Additionally, the `QueryModifier` struct has a single `Direction` field instead of per-field directions.

## Fix Required

1. **AST**: Add `OrderFields []QueryOrderField` to `QueryModifier` struct
2. **Parser**: Loop over comma-separated fields, each with optional asc/desc
3. **Evaluator**: Update all ORDER BY handlers to use `OrderFields` with per-field directions

## Test Cases

```parsley
// Single field
| order Year

// Single field with direction
| order Year desc

// Multiple fields, last has direction (all should inherit)
| order Year, Month, Day desc

// Multiple fields with individual directions
| order Year asc, Month desc, Day asc
```
