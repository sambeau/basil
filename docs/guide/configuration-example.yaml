# Basil Example Configuration
# This demonstrates the basic configuration options

server:
  host: localhost
  port: 8080

# Custom site metadata - accessible in Parsley handlers as meta.*
# meta:
#   name: "My Awesome Blog"
#   tagline: "Thoughts on code and coffee"
#   contact_email: "hello@example.com"
#   social:
#     twitter: "@myblog"
#     github: "myblog"
#   features:
#     comments: true
#     dark_mode: false

# Session configuration
# session:
#   store: cookie                     # "cookie" (default) or "sqlite"
#   secret: !secret auto              # Auto-generate secret (recommended)
#   # secret: !secret ${SESSION_SECRET}  # Use env var for multi-instance deployments
#   max_age: 24h
#   cookie_name: "_basil_session"

logging:
  level: info
  format: text
  output: ./logs/basil.log  # Log to file (use 'stderr' for console)
  parsley:
    output: ./logs/parsley.log  # Parsley script log() output

# HTTP response compression (enabled by default)
# compression:
#   enabled: true       # Enable gzip compression (default: true)
#   level: default      # Compression level: fastest, default, best, none
#   min_size: 1024      # Minimum response size to compress (bytes)
#   zstd: false         # Enable Zstd compression (experimental)

# SQLite database (path relative to config file)
# sqlite: ./db/data.db

# Development mode settings
# dev:
#   log_database: ./logs/dev_logs.db  # Development logs database (default: dev_logs.db in project root)
#   log_max_size: 10MB                 # Maximum log database size
#   log_truncate_pct: 25               # Percentage to delete when truncating
#   cache: false                       # Enable response caching in dev mode

# Public directory for static files
# Paths under this directory are automatically rewritten to web-root URLs
# e.g., @./public/images/foo.png â†’ /images/foo.png in HTML output
public_dir: ./public

# Asset bundling (automatic)
# Basil automatically bundles all .css and .js files from your handlers directory
# Access with <Css/> and <Script/> tags in your Parsley handlers
# Routes: /__site.css and /__site.js
# - Files are concatenated in depth-first, alphabetical order
# - Hidden files (starting with .) are excluded
# - Cache-busting hash is added automatically (e.g., ?v=a1b2c3d4)
# - In dev mode, bundles include source path comments

# Example routes (commented out - add your handlers)
# routes:
#   - path: /
#     handler: handlers/index.parsley
#   - path: /api/*
#     handler: handlers/api.parsley

# Example static files (commented out)
# static:
#   - path: /static/
#     root: ./public

# File system security
# By default, handlers can read files but cannot write
# Use allow_write to whitelist directories where handlers can save data
# security:
#   allow_write:
#     - ./data       # Allow writes to data directory
#     - ./uploads    # Allow writes to uploads directory

# Git over HTTPS - serve your site as a Git repository
# Allows pushing changes directly to the server
# git:
#   enabled: true        # Enable Git endpoint at /.git/
#   require_auth: true   # Require API key authentication

# Developer profiles for per-developer overrides
# Each developer can have their own port, database, handlers, etc.
# Use with: basil --dev --profile sam
# developers:
#   sam:
#     port: 3001
#     sqlite: sam.db
#     # handlers: sam-handlers  # Optional: use different handlers directory
#     # static: sam-public      # Optional: use different static files directory
#     logging:
#       level: debug
#   alex:
#     port: 3002
#     sqlite: alex.db

# Environment Variables and Secrets
# ---------------------------------
# You can use ${VAR} or ${VAR:-default} anywhere in the config to
# interpolate environment variables. Combine with !secret to mark
# values as sensitive (hidden in DevTools).
#
# Examples:
#   port: ${PORT:-8080}                    # Default to 8080 if PORT not set
#   database:
#     url: !secret ${DATABASE_URL}         # Required env var, marked secret
#   meta:
#     api_url: ${PUBLIC_API_URL:-https://api.example.com}
#
# The !secret tag hides values in DevTools but does NOT encrypt them.
# For session secrets, use "!secret auto" to auto-generate a secure value.
