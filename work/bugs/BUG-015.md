# BUG-015: Schema .as() changes table column order to alphabetical

**Status**: investigating  
**Reported**: 2026-01-16  
**Severity**: medium  
**Component**: parsley/evaluator

## Summary

Applying a schema to a table via `.as(Schema)` changes the column order to alphabetical instead of preserving the order defined in the schema.

## Observed Behavior

When applying a schema to a table, the columns are reordered alphabetically:

```json
{
  "Age": 20,
  "Birthday": "22 April 2005",
  "Firstname": "Solly",
  "Name": "Solly Phillips",
  "Surname": "Phillips",
  "id": 1
}
```

## Expected Behavior

Columns should maintain the order defined in the schema:

```parsley
@schema Birthday {
    id: id,
    Name: string,
    Firstname: string,
    Surname: string,
    Birthday: date
    Age: int,
}
```

Expected order: id, Name, Firstname, Surname, Birthday, Age

## Reproduction Steps

1. Define a schema with specific field order
2. Create a table from a query using `.map()`
3. Apply the schema with `.as(SchemaName)`
4. Observe that column order is alphabetical, not schema order

```parsley
@query(People ??->*)
    .map(fn({Firstname, Surname, Day, Month, Year, id}){
        dob = @({Year}-{Month}-{Day})
        age = floor((@today - dob) / @1y)
        {
            id: id,
            Name: Firstname + " " + Surname,
            Firstname: Firstname,
            Surname: Surname,
            Birthday: dob.format("long","en_GB")
            Age: age,
        }
    }).as(Birthday)
```

## Investigation Notes

*(To be filled during investigation)*

## Resolution

*(To be filled when resolved)*
